[[command]]
id = "read_words"
name = {jp="ワード単位の一括読出し", en="ReadWords"}
command_code = 0x0401
subcommand = {Q=0x0000,R=0x0002}
device_family = "Any"
request_format = ["command:2be", "subcommand:2be", "start_addr:3le", "device_code:1", "count:2le"]
response_format = ["data_blocks:blocks_words_le"]
limits = { word_points = 960, dword_points = 480, bit_points = 15360 }

[[command]]
id = "read_bits"
name = {jp="ビット単位の一括読出し", en="ReadBits"}
command_code = 0x0401
subcommand = {Q=0x0001,R=0x0003}
device_family = "Bit"
request_format = ["command:2be", "subcommand:2be", "start_addr:3le", "device_code:1", "count:2le"]
response_format = ["data_blocks:blocks_nibbles:high"]
limits = { bit_points = 7168 }

[[command]]
id = "write_words"
name = {jp="ワード単位の一括書込み", en="WriteWords"}
command_code = 0x1401
subcommand = {Q=0x0000,R=0x0002}
# data: array of u16 words to write
device_family = "Any"
request_format = ["command:2be", "subcommand:2be", "start_addr:3le", "device_code:1", "count:2le", "data:words_le"]
response_format = []
limits = { word_points = 960, dword_points = 480, bit_points = 15360 }

[[command]]
id = "write_bits"
name = {jp="ビット単位の一括書込み", en="WriteBits"}
command_code = 0x1401
subcommand = {Q=0x0001,R=0x0003}
# For bits, expect caller to provide pre-packed bytes under "payload" (array of bytes). We append payload as bytes.
device_family = "Bit"
request_format = ["command:2be", "subcommand:2be", "start_addr:3le", "device_code:1", "count:2le", "payload:bytes"]
response_format = []
limits = { bit_points = 7168 }

[[command]]
id = "read_random_words"
name = {jp="ワード単位のランダム読出し", en="ReadRandomWords"}
command_code = 0x0403
subcommand = {Q=0x0000,R=0x0002}
device_family = "Word"
request_format = ["command:2be", "subcommand:2be", "word_block_count:1", "bit_block_count:1"]
response_format = ["word_blocks:blocks_words_le", "bit_blocks:blocks_bits_packed"]

[[command]]
id = "write_random_words" 
name = {jp="ワード単位のランダム書込み", en="WriteRandomWords"}
command_code = 0x1403
subcommand = {Q=0x0000,R=0x0002}
device_family = "Word"
request_format = ["command:2be", "subcommand:2be", "word_block_count:1", "bit_block_count:1"]
response_format = []

# [[command]]
# id = "read_random_bits"
# name = {jp="ビット単位のランダム読出し", en="ReadRandomBits"}
# command_code = 0x0403
# subcommand = {Q=0x0001,R=0x0003}
# request_format = ["command:2be", "subcommand:2be", "word_block_count:1", "bit_block_count:1"]
# response_format = ["word_blocks:blocks_words_le", "bit_blocks:blocks_bits_packed"]

[[command]]
id = "write_random_bits"
name = {jp="ビット単位のランダム書込み", en="WriteRandomBits"}
command_code = 0x1403
subcommand = {Q=0x0001,R=0x0003}
device_family = "Bit"
request_format = ["command:2be", "subcommand:2be", "word_block_count:1", "bit_block_count:1"]
response_format = []

[[command]]
id = "read_blocks"
name = {jp="複数ブロック一括読出し", en="ReadMultipleBlocks"}
command_code = 0x0406
subcommand = {Q=0x0000,R=0x0002}
request_format = ["command:2be", "subcommand:2be", "word_block_count:1", "bit_block_count:1"]
response_format = ["word_blocks:blocks_words_le", "bit_blocks:blocks_bits_packed"]

[[command]]
id = "write_blocks"
name = {jp="複数ブロック一括書込み", en="WriteMultipleBlocks"}
command_code = 0x1406
subcommand = {Q=0x0000,R=0x0002}
request_format = []
response_format = []




[[command.block_templates]]
name = "word_block"
repeat_field = "word_block_count"
fields = ["start_addr:3le", "device_code:1", "count:2le"]
device_family = "Word"

[[command.block_templates]]
name = "bit_block"
repeat_field = "bit_block_count"
fields = ["start_addr:3le", "device_code:1", "count:2le"]
device_family = "Bit"

[[command]]
id = "echo"
name = {jp = "折り返しテスト(Echo)", en = "Echo Test"}
command_code = 0x0619
# simple echo: take arbitrary payload and return it back
request_format = ["command:2be", "subcommand:2be", "payload:ascii_hex"]
response_format = ["payload:ascii_hex"]
device_family = "Any"
